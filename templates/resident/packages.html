{% extends "base.html" %}

{% block content %}
<h4 class="fw-bold mb-4">Inbox & Packages</h4>

<div class="row">
    <div class="col-lg-8">
        
        <h6 class="text-muted text-uppercase small fw-bold mb-3">Ready for Pickup</h6>
        
        <div class="card mb-4">
            <div class="list-group list-group-flush rounded-3">
                {% if packages %}
                    {% for package in packages %}
                        {% if package.status == 'ready' %}
                        <div class="list-group-item p-4 d-flex justify-content-between align-items-center border-0">
                            <div class="d-flex align-items-center">
                                <div class="bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                    <i class="bi bi-box-seam fs-5"></i>
                                </div>
                                <div>
                                    <h6 class="mb-1 fw-bold">{{ package.carrier }} Package</h6>
                                    <p class="mb-0 text-muted small">Tracking: {{ package.tracking }} • {{ package.location }}</p>
                                </div>
                            </div>
                            <button class="btn btn-dark btn-sm rounded-pill px-3">View Code</button>
                        </div>
                        {% elif package.status == 'processing' %}
                        <div class="list-group-item p-4 d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <div class="bg-warning bg-opacity-10 text-warning rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                                    <i class="bi bi-envelope fs-5"></i>
                                </div>
                                <div>
                                    <h6 class="mb-1 fw-bold">{{ package.carrier }}</h6>
                                    <p class="mb-0 text-muted small">{{ package.location }} • Arrived {{ package.arrival }}</p>
                                </div>
                            </div>
                            <span class="badge bg-secondary bg-opacity-10 text-dark">Processing</span>
                        </div>
                        {% endif %}
                    {% endfor %}
                    {% if not any(p.status == 'ready' or p.status == 'processing' for p in packages) %}
                    <div class="list-group-item p-4 text-center text-muted">
                        No packages ready for pickup
                    </div>
                    {% endif %}
                {% else %}
                <div class="list-group-item p-4 text-center text-muted">
                    No packages available
                </div>
                {% endif %}
            </div>
        </div>

        <h6 class="text-muted text-uppercase small fw-bold mb-3">History</h6>
        <div class="card opacity-75">
             <div class="list-group list-group-flush rounded-3">
                {% if packages %}
                    {% for package in packages %}
                        {% if package.status == 'picked_up' %}
                        <div class="list-group-item p-3 border-0">
                            <div class="d-flex justify-content-between">
                                <span class="text-muted">{{ package.carrier }} Delivery</span>
                                <span class="text-muted small">{{ package.arrival }}</span>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
             </div>
        </div>

    </div>
    
    <div class="col-lg-4">
        <div class="card bg-primary text-white p-4 border-0" style="background: linear-gradient(135deg, #1f2937 0%, #000 100%);">
            <h5 class="fw-bold mb-2">Locker Code</h5>
            <p class="small text-white-50">Use this QR code at the kiosk to retrieve your packages quickly.</p>
            <div class="bg-white p-2 d-inline-block rounded mt-2">
                <i class="bi bi-qr-code fs-1 text-dark"></i>
            </div>
        </div>
    </div>
</div>
{% endblock %}